

CREATE TABLE {schema_name}.users (
    license varchar(255) not null primary key ,
    name varchar(255),
    email varchar(255),
    expiry date,
    plan ENUM('trial','enterprise')
);

CREATE TABLE {schema_name}.activity (
    user_license varchar(255),
    batch_id int not null primary key,
    activity_date date,
    module ENUM('auto_connect','broadcast','auto_visit and follow','endorse my contacts','remove connections', 'withdraw invites','create contact list'),
    pages ENUM('search_page','sales_navigator'),
    status ENUM('completed','failed','stopped'),
    foreign key(user_license) references {schema_name}.users(license)
);

CREATE TABLE {schema_name}.messages (
    user_license varchar(255),
    message_id int not null primary key,
    title varchar(255),
    body text,
    last_used date,
    saved bool,
    category ENUM('message','inmail'),
    foreign key(user_license) references {schema_name}.users(license)
);




CREATE TABLE {schema_name}.email (
    user_license varchar(255),
    email_id int not null primary key,
    title varchar(255),
    body text,
    last_used date,
    saved bool,
    foreign key(user_license) references {schema_name}.users(license)
);


CREATE TABLE {schema_name}.email_sent (
	id int NOT NULL primary key AUTO_INCREMENT,
    user_license varchar(255),
    batch_id int,
    email_id int,
    profile_url varchar(255),
    status ENUM('sent','skipped','failed'),
    foreign key(user_license) references {schema_name}.users(license),
    foreign key(batch_id) references {schema_name}.activity(batch_id),
    foreign key(email_id) references {schema_name}.email(email_id)
);

CREATE TABLE {schema_name}.reply (
	id int NOT NULL primary key AUTO_INCREMENT,
    user_license varchar(255),
    reply text,
    reply_date date,
    foreign key(user_license) references {schema_name}.users(license)
);


CREATE TABLE {schema_name}.message_sent (
	id int NOT NULL primary key AUTO_INCREMENT,
    user_license varchar(255),
    batch_id int,
    message_id int,
    profile_url varchar(255),
    status ENUM('sent','skipped','failed'),
    foreign key(user_license) references {schema_name}.users(license),
    foreign key(batch_id) references {schema_name}.activity(batch_id),
    foreign key(message_id) references {schema_name}.messages(message_id)
);

CREATE TABLE {schema_name}.profiles_visited (
    id int NOT NULL primary key AUTO_INCREMENT,
	user_license varchar(255),
    batch_id int,
    auto_followed bool,
    profile_url varchar(255),
    first_visited date,
    las{schema_name}_visited date,
    foreign key(user_license) references {schema_name}.users(license),
    foreign key(batch_id) references {schema_name}.activity(batch_id)
);


CREATE TABLE {schema_name}.profiles_scraped (
    id int NOT NULL primary key AUTO_INCREMENT,
	user_license varchar(255),
    batch_id int,
   	profile_url varchar(255),
   	scraped_on date,
   	first_name varchar(255),
   	last_name varchar(255),
   	school varchar(255),
   	company varchar(255),
   	title varchar(255),
   	location varchar(255),
   	phone_number int,
   	foreign key(user_license) references {schema_name}.users(license),
    foreign key(batch_id) references {schema_name}.activity(batch_id)
);


CREATE TABLE {schema_name}.invites (
	id int NOT NULL primary key AUTO_INCREMENT,
    user_license varchar(255),
    batch_id int,
	profile_url varchar(255),
	last_updated date,
	withdrawn bool,
	foreign key(user_license) references {schema_name}.users(license),
    foreign key(batch_id) references {schema_name}.activity(batch_id)
);

CREATE TABLE {schema_name}.profiles_endorsed (
    id int NOT NULL primary key AUTO_INCREMENT,
	user_license varchar(255),
    batch_id int,
	profile_url varchar(255),
	endorsed_on date,
	skills ENUM('all','top 3'),
	foreign key(user_license) references {schema_name}.users(license),
    foreign key(batch_id) references {schema_name}.activity(batch_id)
);